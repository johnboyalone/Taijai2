<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏¢‡πÉ‡∏à ‡∏†‡∏≤‡∏Ñ 2</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mitr:wght@300;400;500&family=Kanit:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <!-- ‚òÖ‚òÖ‚òÖ FIREBASE SDK (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ) ‚òÖ‚òÖ‚òÖ -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    <div id="game-container">

        <!-- ‚òÖ‚òÖ‚òÖ LOBBY SCREEN (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡∏°‡πà) ‚òÖ‚òÖ‚òÖ -->
        <div id="lobby-screen" class="screen">
            <h1>‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏¢‡πÉ‡∏à ‡∏†‡∏≤‡∏Ñ 2</h1>
            <div class="lobby-group">
                <label for="player-name-input">‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</label>
                <input type="text" id="player-name-input" class="input-field" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô..." maxlength="15">
            </div>
            <div class="lobby-group">
                <button id="create-room-btn" class="btn-primary">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</button>
            </div>
            <div class="lobby-group or-divider"><span>‡∏´‡∏£‡∏∑‡∏≠</span></div>
            <div class="lobby-group">
                <input type="text" id="join-room-input" class="input-field" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á..." maxlength="4">
                <button id="join-room-btn" class="btn-secondary">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á</button>
            </div>
            <div id="lobby-error-msg" class="error-message"></div>
        </div>

        <!-- ‚òÖ‚òÖ‚òÖ WAITING ROOM SCREEN (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡∏°‡πà) ‚òÖ‚òÖ‚òÖ -->
        <div id="waiting-room-screen" class="screen hidden">
            <h2>‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÄ‡∏•‡πà‡∏ô</h2>
            <div class="room-code-display">
                ‡∏£‡∏´‡∏±‡∏™‡∏´‡πâ‡∏≠‡∏á: <span id="room-code-text">----</span>
                <button id="copy-room-code-btn" class="copy-btn">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
            </div>
            <h3>‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á:</h3>
            <ul id="player-list-waiting">
                <!-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÇ‡∏î‡∏¢ script.js -->
            </ul>
            <p id="waiting-status-text">‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á (Host) ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°...</p>
            <button id="start-game-from-waiting-btn" class="btn-primary hidden">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!</button>
        </div>


        <!-- Welcome Screen (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô) -->
        <div id="welcome-screen" class="screen hidden">
            <h1>‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏¢‡πÉ‡∏à ‡∏†‡∏≤‡∏Ñ 2</h1>
            <div class="rules">
                <h3>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h3>
                <p>
                    <strong>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:</strong> ‡∏¢‡∏∑‡∏ô‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï!
                </p>
                <p>
                    <strong>‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô:</strong> ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≠‡∏ö ‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 1 ‡∏Ñ‡∏ô‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô "‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢" ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏¢ "‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö" ‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
                </p>
                <p>
                    <strong>‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏¢:</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô "‡∏ñ‡∏π‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (Strike)" ‡πÅ‡∏•‡∏∞ "‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏Ç (Ball)" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ
                </p>
                <p>
                    <strong>‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ:</strong>
                    <br>- ‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ú‡∏¥‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏° <strong>"‡∏ï‡∏∏‡∏¢‡∏ã‡∏∞‡πÄ‡∏ñ‡∏≠‡∏∞"</strong> ‡∏à‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï 1 ‡∏î‡∏ß‡∏á
                    <br>- ‡∏´‡∏≤‡∏Å‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ **‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏°‡∏î** ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏Å‡∏î‡∏ó‡∏≤‡∏¢ ‡∏à‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï 1 ‡∏î‡∏ß‡∏á
                    <br>- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏´‡∏°‡∏î (0 ‡∏î‡∏ß‡∏á) ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏±‡∏î‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°
                </p>
                <p>
                    <strong>‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏∞:</strong> ‡∏´‡∏≤‡∏Å‡∏ó‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏π‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏° <strong>"‡∏ï‡∏∏‡∏¢‡∏ã‡∏∞‡πÄ‡∏ñ‡∏≠‡∏∞"</strong> ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏±‡∏î‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!
                </p>
            </div>
            <button id="show-setup-btn" class="btn-primary">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
        </div>

        <!-- Setup Screen (‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢ Host) -->
        <div id="setup-screen" class="screen hidden">
            <h2>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡∏°</h2>
            <div class="setup-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô:</label>
                <div id="player-count-selector" class="selector-container"></div>
            </div>
            <div class="setup-group">
                <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å:</label>
                <div id="digit-count-selector" class="selector-container"></div>
            </div>
            <button id="start-game-btn" class="btn-primary">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</button>
        </div>

        <!-- Game Screen (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á) -->
        <div id="game-screen" class="screen hidden">
            <div id="status-header">
                <div id="main-status-text">‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
                <div id="sub-status-text">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 2</div>
            </div>

            <div id="players-bar">
                <svg id="energy-beam-svg" class="hidden">
                    <defs>
                        <linearGradient id="beam-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:var(--accent-color-1);stop-opacity:1" />
                            <stop offset="100%" style="stop-color:var(--accent-color-2);stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path id="energy-beam-path" d="" stroke="url(#beam-gradient)" stroke-width="4" stroke-linecap="round" fill="none"/>
                </svg>
                <div id="shout-guess-display" class="hidden"></div>
            </div>

            <div id="my-secret-number-area">
                <div class="secret-label">‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á)</div>
                <div id="my-secret-number-display">----</div>
            </div>

            <div id="timer-container">
                <div id="timer-bar"></div>
            </div>

            <div id="display-area">
                <div id="guess-display">----</div>
            </div>

            <div id="action-area">
                <div id="keypad">
                    <button class="key num">1</button>
                    <button class="key num">2</button>
                    <button class="key num">3</button>
                    <button class="key num">4</button>
                    <button class="key num">5</button>
                    <button class="key num">6</button>
                    <button class="key num">7</button>
                    <button class="key num">8</button>
                    <button class="key num">9</button>
                    <button class="key action" id="clear-btn">‡∏•‡∏ö</button>
                    <button class="key num">0</button>
                    <button class="key action" id="submit-guess-btn">‡∏ó‡∏≤‡∏¢</button>
                </div>
                <button class="key eliminate" id="eliminate-btn">‡∏ï‡∏∏‡∏¢‡∏ã‡∏∞‡πÄ‡∏ñ‡∏≠‡∏∞!</button>
            </div>
        </div>

        <!-- Game Over Screen (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á) -->
        <div id="game-over-screen" class="screen hidden">
            <!-- Part 1: Winner Announcement -->
            <div id="winner-announcement" class="game-over-part">
                <h2 class="game-over-title">‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏Ñ‡∏∑‡∏≠...</h2>
                <div class="winner-name-text" id="winner-name">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 1</div>
                <div class="winner-secret-label">‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞</div>
                <div class="winner-secret-text" id="winner-secret-number">1234</div>
                <div class="next-prompt">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡πà‡∏≠...</div>
            </div>

            <!-- Part 2: Epithet Reveal -->
            <div id="epithet-reveal" class="game-over-part hidden">
                 <h2 class="game-over-title">‡∏â‡∏≤‡∏¢‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏Å‡∏°</h2>
                 <div id="epithet-card-container">
                    <div id="epithet-card-display" class="epithet-card hidden">
                        <div class="epithet-main-content">
                            <div class="epithet-player-name"></div>
                            <div class="epithet-title"></div>
                        </div>
                        <div class="epithet-icon"></div>
                        <div class="epithet-description"></div>
                    </div>
                 </div>
                 <div class="next-prompt hidden">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥...</div>
            </div>

            <!-- Part 3: Stats Table -->
            <div id="stats-container" class="game-over-part hidden">
                <h3>‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h3>
                <div class="stats-table-wrapper">
                    <table id="stats-table">
                        <tbody id="stats-table-body"></tbody>
                    </table>
                </div>
            </div>
            <button id="restart-game-btn" class="btn-primary hidden">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>
    </div>

    <!-- Floating UI Elements (‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á) -->
    <div id="elimination-skull-animation" class="hidden">üíÄ</div>
    <button id="popup-history-btn" class="hidden">
        <span class="icon">üìñ</span>
        <div class="preview-text"></div>
    </button>

    <div id="history-popup-overlay">
        <div id="history-popup">
            <h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h3>
            <div id="history-filter-buttons"></div>
            <ul id="history-popup-list"></ul>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
